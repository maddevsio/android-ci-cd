# –ë–æ–π–ª–µ—Ä –¥–ª—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ CI/CD –¥–ª—è Android –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

[![Developed by Mad Devs](https://maddevs.io/badge-dark.svg)](https://maddevs.io?utm_source=github&utm_medium=madboiler)
[![License](https://img.shields.io/github/license/maddevsio/android-ci-cd)](https://github.com/maddevsio/android-ci-cd/blob/main/LICENSE.md)

–ë–æ–ª—å—à–µ –Ω–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å Android-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤—Ä—É—á–Ω—É—é. –ù–∞—á–Ω–∏—Ç–µ –¥–µ–ª–∞—Ç—å —ç—Ç–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞ –ª—é–±–æ–º —ç—Ç–∞–ø–µ (test, beta –∏ prod).

üëá  –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —ç—Ç–æ—Ç 5-–º–∏–Ω—É—Ç–Ω—ã–π –≤–∏–¥–µ–æ—Ä–æ–ª–∏–∫, —á—Ç–æ–±—ã –ª—É—á—à–µ –ø–æ–Ω—è—Ç—å –ø–æ–¥—Ö–æ–¥ –∏ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞.üëá
[![Android CI CD](https://img.youtube.com/vi/poSugKUtBPU/0.jpg)](https://youtu.be/poSugKUtBPU)

---

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –±–æ–π–ª–µ—Ä–∞

* **–ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ CI/CD**: –° –ø–æ–º–æ—â—å—é —ç—Ç–æ–≥–æ –±–æ–π–ª–µ—Ä–∞ –≤—ã —Å–º–æ–∂–µ—Ç–µ –ª–µ–≥–∫–æ —Å–æ–∑–¥–∞—Ç—å CI/CD –¥–ª—è –≤–∞—à–µ–≥–æ android-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã [Fastlane](https://fastlane.tools/).
* **–ü—Ä–æ—Å—Ç–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è –∫ –≤–Ω–µ—à–Ω–∏–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º CI/CD**: –ú—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º GitLab-ci –∏–ª–∏ GitHub actions –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è –∫–æ–º–∞–Ω–¥ Fastlane –∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞ —Å–±–æ—Ä–∫–∏ –∏ –ø–æ—Å—Ç–∞–≤–∫–∏.
* **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**: –ü–æ–ª—É—á–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Slack –æ–± —É—Å–ø–µ—à–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏—è—Ö –∏–ª–∏ –æ—à–∏–±–∫–∞—Ö –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–∞–π–ø–ª–∞–π–Ω–∞.
* **–ù–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã –¥–ª—è —Å–±–æ—Ä–∫–∏**: –ú—ã —Å–æ–±–∏—Ä–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤–Ω—É—Ç—Ä–∏ docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Å–æ –≤—Å–µ–º–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏; —ç—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø–µ—Ä–µ–Ω–æ—Å–∏–º–æ—Å—Ç—å –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö GitHub agents –∏–ª–∏ GitLab runners.

## CI/CD

* –î–∞–≤–∞–π—Ç–µ –ø—Ä–µ–∂–¥–µ –≤—Å–µ–≥–æ –æ—Ç–≤–µ—Ç–∏–º –Ω–∞ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –≤–æ–ø—Ä–æ—Å—ã:
  * [–ß—Ç–æ —Ç–∞–∫–æ–µ CI/CD?](https://ru.wikipedia.org/wiki/CI/CD)
    * CI/CD –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–≤—ã—Å–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞ —Å—á–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏. –ö–∞–∫ –∏ –≤ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω–æ–π –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ—Å—Ç–∏, –≤—ã –º–æ–∂–µ—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–π—Å—è –ø—Ä–æ—Ü–µ—Å—Å —Å–±–æ—Ä–∫–∏ (–≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ —Å–±–æ—Ä–∫—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π) —Å –ø–æ–º–æ—â—å—é –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∑–∞–¥–∞—á, –ø–æ–∑–≤–æ–ª—è—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–∏—Ç—å—Å—è –Ω–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞—Ö –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.
  * –ö–∞–∫–∏–µ –µ—Å—Ç—å –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è CI/CD –≤ –º–æ–±–∏–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ?
    1. `–ë—ã—Å—Ç—Ä—ã–µ —Ü–∏–∫–ª—ã –≤—ã–ø—É—Å–∫–∞ —Ä–µ–ª–∏–∑–æ–≤`
       * –ë–ª–∞–≥–æ–¥–∞—Ä—è CI/CD —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –º–æ–≥—É—Ç –≤–Ω–æ—Å–∏—Ç—å –¥–∞–∂–µ —Å–∞–º—ã–µ –Ω–µ–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥, –ø–æ—Å–∫–æ–ª—å–∫—É –æ–Ω–∏ –±—É–¥—É—Ç —Å–æ–±–∏—Ä–∞—Ç—å—Å—è –∏ –¥–æ—Å—Ç–∞–≤–ª—è—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ. –≠—Ç–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –≤—Å–µ–≥–¥–∞ –µ—Å—Ç—å –∞–ª—å—Ñ–∞ –∏–ª–∏ –±–µ—Ç–∞ —Ä–µ–ª–∏–∑, –≥–æ—Ç–æ–≤—ã–π –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é —Å –∞–∫—Ç—É–∞–ª—å–Ω—ã–º –∫–æ–¥–æ–º.
    2. `"–ù–µ–ø—Ä–µ—Ä—ã–≤–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è(CI)" –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—É—á–∞—Ç—å –±—ã—Å—Ç—Ä—ã–π —Ñ–∏–¥–±–µ–∫`
       * –ü—Ä–∏ –±–æ–ª–µ–µ –±—ã—Å—Ç—Ä–æ–º —Ü–∏–∫–ª–µ –≤—ã–ø—É—Å–∫–∞ —Ä–µ–ª–∏–∑–æ–≤ —Å –º–µ–Ω—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ø—Ä–æ—â–µ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫ –æ—à–∏–±–∫–∏. –≠—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ –≤–∞–∂–Ω–æ –¥–ª—è –±–æ–ª—å—à–∏—Ö –∫–æ–º–∞–Ω–¥, –≥–¥–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –∫–æ–¥–∞ –º–æ–≥—É—Ç –≤—ã–∑–≤–∞—Ç—å –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã.
    3. `–ü–æ–≤—ã—à–µ–Ω–∏–µ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã –Ω–∞–ø–∏—Å–∞–Ω–∏—è –∫–æ–¥–∞ —Å –ø–æ–º–æ—â—å—é —Å–±–æ—Ä–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤`
       * –° –∫–æ–º–º–∏—Ç–æ–º ‚Äúpull request-–∞‚Äù —Å–±–æ—Ä–∫–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –¥–æ —Å–ª–∏—è–Ω–∏—è –∫–æ–¥–∞ –≤ –≥–ª–∞–≤–Ω—É—é –≤–µ—Ç–∫—É –∏ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —Å–ª–∏—è–Ω–∏—è –ø—Ä–æ–≤–æ–¥—è—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ unit-—Ç–µ—Å—Ç—ã –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞; —Å–∞–º –∫–æ–¥ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è –±–æ–ª–µ–µ —Ç—â–∞—Ç–µ–ª—å–Ω–æ, –ø—Ä–µ–∂–¥–µ —á–µ–º –æ–Ω —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —á–∞—Å—Ç—å—é —Ä–µ–ª–∏–∑–∞.
    4. `"–ù–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ(CD)" –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞—Ç—å –æ—à–∏–±–∫–∏ –∏ —Ç—â–∞—Ç–µ–ª—å–Ω–µ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å`
       * –ë–ª–∞–≥–æ–¥–∞—Ä—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –∫–∞–∂–¥–æ–≥–æ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å –ø–æ–º–æ—â—å—é –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —ç—Ç–∞–ø–æ–≤ –ø—Ä–æ—Ü–µ—Å—Å–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –ø—Ä–æ–±–ª–µ–º—ã –≤ –∫–æ–¥–µ –º–æ–≥—É—Ç –±—ã—Ç—å –≤—ã—è–≤–ª–µ–Ω—ã –±—ã—Å—Ç—Ä–µ–µ.
    5. `–£–ø—Ä–æ—â–µ–Ω–∏–µ —Å–ª–æ–∂–Ω–æ—Å—Ç–µ–π, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –¥–æ—Å—Ç–∞–≤–∫–æ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π`
       * –ö–∞–∂–¥–∞—è –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏–º–µ–µ—Ç —Å–≤–æ–π –Ω–∞–±–æ—Ä —Å–ª–æ–∂–Ω–æ—Å—Ç–µ–π, –∏ –º–æ–±–∏–ª—å–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–µ —è–≤–ª—è—é—Ç—Å—è –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º. –í Android —Å—É—â–µ—Å—Ç–≤—É—é—Ç —Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ –∏ —Ä–∞–∑–ª–∏—á–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã —Å–æ–∑–¥–∞–Ω–∏—è, –ø–æ–¥–ø–∏—Å–∞–Ω–∏—è, —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π. CI/CD –ø–æ–º–æ–≥–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–æ—Ç –ø—Ä–æ—Ü–µ—Å—Å.

### –û–ø–∏—Å–∞–Ω–∏–µ CI/CD

* –≠—Ç–∞ –¥–∏–∞–≥—Ä–∞–º–º–∞ –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å, –∫–æ—Ç–æ—Ä—ã–π –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º

![flow](./android-ci-cd-CI-CD-flow.drawio.svg)

* –û–ø–∏—Å–∞–Ω–∏–µ —ç—Ç–∞–ø–æ–≤

```
  - build base image                - –≠—Ç–∞–ø —Å–±–æ—Ä–∫–∏ –±–∞–∑–æ–≤–æ–≥–æ –æ–±—Ä–∞–∑–∞, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–±–æ—Ä–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
  - tests and lints                 - –≠—Ç–∞–ø –¥–ª—è –ø—Ä–æ–≥–æ–Ω–∞ —Ç–µ—Å—Ç–æ–≤ –∏ –ª–∏–Ω—Ç–æ–≤.
  - build and deploy to firebase    - –≠—Ç–∞–ø —Å–±–æ—Ä–∫–∏ –∏ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ Firebase.
  - build and deploy to google play - –≠—Ç–∞–ø —Å–±–æ—Ä–∫–∏ –∏ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ Google Play.
```

* –°—Ç–æ–∏—Ç –ø–æ—è—Å–Ω–∏—Ç—å, –¥–ª—è —á–µ–≥–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ –±–∏–ª–¥–æ–≤.

–£—Å–ª–æ–≤–∏—è –∏ –ø–æ–ª–æ–∂–µ–Ω–∏—è:
* –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ `apk` –Ω–µ –º–æ–≥—É—Ç –±—ã—Ç—å –∑–∞–≥—Ä—É–∂–µ–Ω—ã –≤ Google Play
* –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ `aab` –º–æ–≥—É—Ç –±—ã—Ç—å –∑–∞–≥—Ä—É–∂–µ–Ω—ã –≤ Firebase –∏ Google Play

–ü–æ—ç—Ç–æ–º—É –Ω–∞–º –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –±–∏–ª–¥–æ–≤.

* –î–ª—è —É–¥–æ–±—Å—Ç–≤–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –Ω–∞ —ç—Ç–∞–ø–µ `Merge Request` –º—ã –¥–∞–µ–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ–±—Ä–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ –∑–∞–ø—Ä–æ—Å—É –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –µ–≥–æ –≤ `Firebase`.
* –≠—Ç–æ —É–¥–æ–±–Ω–æ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –±–µ–∑ —Å–ª–∏—è–Ω–∏—è –∫–æ–¥–∞ –≤ –æ—Å–Ω–æ–≤–Ω—É—é –≤–µ—Ç–∫—É.
* –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ `apk` –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤ Firebase.

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

* GitLab:
  * –£ –Ω–∞—Å –µ—Å—Ç—å —Ä—É—á–Ω–æ–π —ç—Ç–∞–ø –ø–æ –∑–∞–≥—Ä—É–∑–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ Google Play.
  * –£ –Ω–∞—Å –µ—Å—Ç—å —Ä—É—á–Ω–æ–π —ç—Ç–∞–ø –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é –∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ staging `Firebase`; —ç—Ç–æ—Ç —à–∞–≥ –¥–æ—Å—Ç—É–ø–µ–Ω –≤ `Merge Request`.
* GitHub:
  * –ú—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º [trstringer/manual-approval](https://trstringer.com/github-actions-manual-approval/) action, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–≥–∞–µ—Ç —Å–æ–∑–¥–∞—Ç—å —Ä—É—á–Ω–æ–π —à–∞–≥ approve(–æ–¥–æ–±—Ä–µ–Ω–∏—è) –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –≤ Google Play.
  * –ú—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ä—É—á–Ω–æ–π —à–∞–≥ - `workflow_dispatcher` –¥–ª—è —Å–±–æ—Ä–∫–∏ –∏ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏–∑ –ª—é–±–æ–π –≤–µ—Ç–∫–∏.
* –ü–ª–∞–≥–∏–Ω Fastlane –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–Ω–∞—á–∫–∞.
  * –≠—Ç–æ—Ç –ø–ª–∞–≥–∏–Ω –ø–æ–º–æ–∂–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å –∑–Ω–∞—á–æ–∫ –∫ –∏–∫–æ–Ω–∫–µ –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è Android.
  * –ë–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è [–∑–¥–µ—Å—å](https://docs.fastlane.tools/actions/badge/)
  * –í—ã –≤—Å–µ–≥–¥–∞ –º–æ–∂–µ—Ç–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –µ–≥–æ –¥–ª—è —Å–≤–æ–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞, –≤–æ—Ç –ø—Ä–∏–º–µ—Ä—ã —Ç–æ–≥–æ, –∫–∞–∫ —ç—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º –º—ã

        ![staging](./badge_staging.png) ![prod](./badge_prod.png)

### –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏ —Å–µ—Ä–≤–∏—Å—ã

* [Fastlane](https://fastlane.tools/) - —ç—Ç–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ IOS –∏ Android, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ç–∞–∫–∏–µ —Ä—É—Ç–∏–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏, –∫–∞–∫ —Å–æ–∑–¥–∞–Ω–∏–µ —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤, —Ä–∞–±–æ—Ç–∞ —Å –ø—Ä–æ—Ñ–∏–ª—è–º–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏, —Å–±–æ—Ä–∫–∞ –∏ –∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
* [GitLab-ci](https://docs.gitlab.com/ee/ci/) –∏–ª–∏ [GitHub Actions](https://docs.github.com/en/actions) - –°–∏—Å—Ç–µ–º—ã CI/CD –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –ª–æ–≥–∏–∫–∏ –ø–∞–π–ø–ª–∞–π–Ω–∞ –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥ Fastlane.
* [Docker](https://www.docker.com/) - Docker –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Å—Ä–µ–¥—ã —Å–±–æ—Ä–∫–∏ –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
* [CGP](https://cloud.google.com/)
  * [Firebase](https://firebase.google.com/docs/app-distribution) - –¢–µ—Å—Ç–æ–≤–∞—è —Å—Ä–µ–¥–∞ –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
  * [Google Play](https://play.google.com/console/about/) - –ü—Ä–æ–¥—É–∫—Ç–æ–≤–∞—è —Å—Ä–µ–¥–∞ –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

### –û–ø–∏—Å–∞–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

![main](./android-ci-cd-tools.drawio.svg)

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```commandline
.
‚îú‚îÄ‚îÄ app                   - –ü–∞–ø–∫–∞, —Å–æ–¥–µ—Ä–∂–∞—â–∞—è –ø—Ä–∏–º–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ build.gradle      - –§–∞–π–ª –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Android –ø—Ä–æ–µ–∫—Ç–∞
‚îÇ   ‚îî‚îÄ‚îÄ src
‚îú‚îÄ‚îÄ build.gradle
‚îú‚îÄ‚îÄ Dockerfile            - Dockerfile –¥–ª—è –±–∞–∑–æ–≤–æ–≥–æ –æ–±—Ä–∞–∑–∞, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–∞ —ç—Ç–∞–ø–µ —Å–±–æ—Ä–∫–∏
‚îú‚îÄ‚îÄ docs                  - –ü–∞–ø–∫–∞ –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ fastlane              - –ü–∞–ø–∫–∞ —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π Fastlane
‚îÇ   ‚îú‚îÄ‚îÄ Appfile           - –§–∞–π–ª –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Fastlane
‚îÇ   ‚îú‚îÄ‚îÄ Fastfile          - –§–∞–π–ª –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∫–æ–º–∞–Ω–¥ Fastlane
‚îÇ   ‚îî‚îÄ‚îÄ Pluginfile        - –§–∞–π–ª –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø–ª–∞–≥–∏–Ω–æ–≤ –∏–ª–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π Fastlane
‚îú‚îÄ‚îÄ Gemfile
‚îú‚îÄ‚îÄ gradle                - –ü–∞–ø–∫–∞ –¥–ª—è —Å–±–æ—Ä–∫–∏ Gradle
‚îú‚îÄ‚îÄ gradle.properties     - –§–∞–π–ª –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Gradle
‚îú‚îÄ‚îÄ gradlew
‚îú‚îÄ‚îÄ gradlew.bat
‚îú‚îÄ‚îÄ ic_launcher-web.png
‚îú‚îÄ‚îÄ libs
‚îú‚îÄ‚îÄ proguard-project.txt
‚îú‚îÄ‚îÄ project.properties
‚îú‚îÄ‚îÄ README.md
‚îî‚îÄ‚îÄ settings.gradle       - –§–∞–π–ª –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ Gradle
```

### –î–ª—è –Ω–∞—á–∞–ª–∞:
1. [–°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç –≤ Google Cloud Platform](https://cloud.google.com/)
2. [–°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç Google](https://cloud.google.com/resource-manager/docs/creating-managing-projects)
3. [–°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç Firebase –∏ –∞–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ "App Distribution"](https://cloud.google.com/firestore/docs/client/get-firebase)
4. [–°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ Google Play](https://play.google.com/console/about/)

#### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫–ª—é—á–µ–π –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
1. Json-—Ñ–∞–π–ª —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π –¥–ª—è Firebase
    * –í—ã –¥–æ–ª–∂–Ω—ã –¥–æ–±–∞–≤–∏—Ç—å json-—Ñ–∞–π–ª —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –ø—Ä–æ–µ–∫—Ç–∞ Firebase, –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –≤ base64, –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è.
      > https://firebase.google.com/docs/android/setup - –≠—Ç–∞–ø 3 
      ```bash
      base64 google-services.json > firebase_setting
      ```

2. –°–µ—Ä–≤–∏—Å –∞–∫–∫–∞—É–Ω—Ç —Å –¥–æ—Å—Ç—É–ø–æ–º –∫ Firebase
    * –°–æ–∑–¥–∞–π—Ç–µ —Å–µ—Ä–≤–∏—Å –∞–∫–∫–∞—É–Ω—Ç –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ Firebase
      > Choose your Firebase account --> Project Overview --> Project setting --> Service Account --> create service account
    * –î–æ–±–∞–≤—å—Ç–µ –∫–ª—é—á —Å–µ—Ä–≤–∏—Å –∞–∫–∫–∞—É–Ω—Ç–∞(SA), –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤ base64, –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è.
      ```bash
      base64 sa.json > key_firebase
      ```

3. –°–µ—Ä–≤–∏—Å –∞–∫–∫–∞—É–Ω—Ç —Å –¥–æ—Å—Ç—É–ø–æ–º –∫ Google Play
    * –°–æ–∑–¥–∞–π—Ç–µ —Å–µ—Ä–≤–∏—Å –∞–∫–∫–∞—É–Ω—Ç –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ [Google Play](./README_GOOGLE_PLAY.md)
    * –î–æ–±–∞–≤—å—Ç–µ –∫–ª—é—á —Å–µ—Ä–≤–∏—Å –∞–∫–∫–∞—É–Ω—Ç–∞(SA), –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤ base64, –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è
      ```bash
      base64 google_play.json > google_play
      ```

4. –•—Ä–∞–Ω–∏–ª–∏—â–µ –∫–ª—é—á–µ–π –¥–ª—è –ø–æ–¥–ø–∏—Å–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
    * –ß—Ç–æ–±—ã –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –Ω–µ–æ–±—Ö–æ–¥–∏–º –∫–ª—é—á, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã.
      ```bash
      keytool -genkey -v -keystore my-release-key.keystore -alias alias_name -keyalg RSA -keysize 2048 -validity 10000
      ```
    * –î–æ–±–∞–≤—å—Ç–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –∫–ª—é—á–µ–π, –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –≤ base64, –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è.
      ```bash
      base64 my-release-key.keystore > keystore
      ```

##### GitLab CI/CD

* –ú—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –æ–∫—Ä—É–∂–µ–Ω–∏—è `Environments` –≤ –Ω–∞—à–µ–º –ø–∞–π–ø–ª–∞–π–Ω–µ, —á—Ç–æ–±—ã —Ä–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞—à–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è–º; –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–∞–±–æ—Ç—ã —Å–æ–∑–¥–∞–π—Ç–µ 3 –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ `gitlab-ci-cd`:

```
GitLab --> Deployments --> Environment --> New Environment
```

* –ù–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–∑–¥–∞—Ç—å —Ç—Ä–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
  * staging
  * prod
  * prod-gp

##### GitHub Actions

* –ú—ã –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ GitHub Actions, –Ω–æ —ç—Ç–æ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –≤ –ø—É–±–ª–∏—á–Ω—ã—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è—Ö –∏–ª–∏ –≤ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã—Ö –ø–æ–¥–ø–∏—Å–∫–∞—Ö.
* –í —ç—Ç–æ–º –±–æ–π–ª–µ—Ä–ø–ª–µ–π—Ç–µ –º—ã –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ GitHub Actions.

##### –ü–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —ç—Ç–æ–≥–æ —Ñ–∞–π–ª–∞ `firebase_setting`:
    ```
    GitLab --> Settings --> CI/CD --> Variables --> Add variable
    ```
    –∏–ª–∏
    ```
    GitHub --> Settings --> Secrets --> Actions --> New repository secret
    ```

    > –í –ø–æ–ª–µ key –≤—Å—Ç–∞–≤—å—Ç–µ `GOOGLE_SERVICES_JSON`, –≤ –ø–æ–ª–µ value –≤—Å—Ç–∞–≤—å—Ç–µ –≤–∞—à `google-services.json`, –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤ base64.

2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —ç—Ç–æ–≥–æ —Ñ–∞–π–ª–∞ `key_firebase`:
    ```
    GitLab --> Settings --> CI/CD --> Variables --> Add variable
    ```
    –∏–ª–∏
    ```
    GitHub --> Settings --> Secrets --> Actions --> New repository secret
    ```

    > –í –ø–æ–ª–µ key –≤—Å—Ç–∞–≤—å—Ç–µ `SA_JSON_KEY`, –≤ –ø–æ–ª–µ value –≤—Å—Ç–∞–≤—å—Ç–µ –≤–∞—à `sa.key`, –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤ base64.

3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —ç—Ç–æ–≥–æ —Ñ–∞–π–ª–∞ `google_play`:
    ```
    GitLab --> Settings --> CI/CD --> Variables --> Add variable
    ```
    –∏–ª–∏
    ```
    GitHub --> Settings --> Secrets --> Actions --> New repository secret
    ```
    > –í –ø–æ–ª–µ key –≤—Å—Ç–∞–≤—å—Ç–µ `SA_JSON_GP_KEY`, –≤ –ø–æ–ª–µ value –≤—Å—Ç–∞–≤—å—Ç–µ –≤–∞—à `google_play.json`, –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤ base64.

4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —ç—Ç–æ–≥–æ —Ñ–∞–π–ª–∞  `keystore`: 

    ```
    GitLab --> Settings --> CI/CD --> Variables --> Add variable
    ```
    –∏–ª–∏
    ```
    GitHub --> Settings --> Secrets --> Actions --> New repository secret
    ```
    > –í –ø–æ–ª–µ key –≤—Å—Ç–∞–≤—å—Ç–µ `KEYSTORE`, –≤ –ø–æ–ª–µ value –≤—Å—Ç–∞–≤—å—Ç–µ –≤–∞—à `my-release-key.keystore`, –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤ base64.

##### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

| –ù–∞–∑–≤–∞–Ω–∏–µ                        |     –û–∫—Ä—É–∂–µ–Ω–∏–µ      |                                                                                                                                    –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------------------------|:--------------------:|-----------------------------------------------------------------------------------------------------------------------------------------------:|
| KEYSTORE                    |         –í—Å–µ          |                                                                                                    –ö–æ–¥–∏—Ä–æ–≤–∫–∞ –≤ base64 –¥–ª—è –ø–æ–¥–ø–∏—Å–∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –∫–ª—é—á–µ–π (base64) |
| KEYSTORE_PW                 |         –í—Å–µ          |                                                                                                                  –ü–∞—Ä–æ–ª—å –¥–ª—è –ø–æ–¥–ø–∏—Å–∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –∫–ª—é—á–µ–π |
| ALIAS                       |         –í—Å–µ          |                                                                                                                                 Alias —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –∫–ª—é—á–µ–π |
| ALIAS_PW                    |         –í—Å–µ          |                                                                                                                    –ü–∞—Ä–æ–ª—å –¥–ª—è Alias-–∞ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –∫–ª—é—á–µ–π |
| SA_JSON_KEY                 |     STAGING/PROD     |                                                                                                      –ö–ª—é—á —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏ –¥–ª—è Firebase (base64) |
| SA_JSON_GP_KEY              |       PROD-GP        |                                                                                           –ö–ª—é—á —Å–µ—Ä–≤–∏—Å –∞–∫–∫–∞—É–Ω—Ç–∞ –¥–ª—è Google Play Console (base64) |
| GOOGLE_SERVICES_JSON        |         –í—Å–µ          |                                                                                                           –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è Firebase |
| APP_VERSION_NAME            | STAGING/PROD/PROD-GP |                                                                                                                            –í–µ—Ä—Å–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è |
| FIREBASE_APP_ID             |     STAGING/PROD     |                                                                                                                     –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ Firebase |
| BUILD_TASK                  | STAGING/PROD/PROD-GP |                                                                                                   –ò–º—è –∑–∞–¥–∞—á–∏ –≤ gradle (assemble, bundle, test) |
| BUILD_TYPE                  | STAGING/PROD/PROD-GP |                                                                                                                 –¢–∏–ø —Å–±–æ—Ä–∫–∏ (assemble, release) |
| SLACK_WEBHOOK_URL           |         –í—Å–µ          |                                                                                                                                  –í–µ–±—Ö—É–∫ Slack |
| FIREBASE_TESTER_GROUP_NAME  |     STAGING/PROD     |                                                                                                              –ù–∞–∑–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫–æ–≤ –≤ Firebase |
| APPROVERS                   |         –í—Å–µ          |                                                                         –°–ø–∏—Å–æ–∫ –æ–¥–æ–±—Ä—è—é—â–∏—Ö –¥–ª—è —Ä–µ–ª–∏–∑–∞ Google Play, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ GitHub Actions |
| CI_PIPELINE_ID              |         –í—Å–µ          |                            ID –ø–∞–π–ø–ª–∞–π–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –¥–ª—è `versionCode`, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ GitLab, –≤ GitHub Actions –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è github.run_number |
| CI_COMMIT_BEFORE_SHA        |         –í—Å–µ          |                   –ü—Ä–µ–¥—ã–¥—É—â–∏–π –∫–æ–º–º–∏—Ç, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è changelog-–∞ —Å–±–æ—Ä–∫–∏, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –æ–±—ä—è–≤–ª—è–µ—Ç—Å—è –≤ GitLab, –≤ GitHub Actions –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è github.event.before |
| FIREBASE_ARTIFACT_TYPE      |     STAGING/PROD     |                                                                                                        –¢–∏–ø –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –≤ Firebase |
| PROJECT_DIR                 |         –í—Å–µ          | –ï—Å–ª–∏ –ø—Ä–æ–µ–∫—Ç –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –Ω–µ –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –∫–∞—Ç–∞–ª–æ–≥–µ, –≤—ã –º–æ–∂–µ—Ç–µ —É–∫–∞–∑–∞—Ç—å –ø—É—Ç—å –∫ –∫–∞—Ç–∞–ª–æ–≥—É –ø—Ä–æ–µ–∫—Ç–∞ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `PROJECT_DIR` –≤ Fastfile. |
| APP_PACKAGE_NAME            |         –í—Å–µ          |                                                                 –ò–º—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Android –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –Ω–∞–ø—Ä–∏–º–µ—Ä, –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º `com.boiler.android.hello` |
| CI_ENVIRONMENT_NAME         |     STAGING/PROD     |                                                                                         –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∑–Ω–∞—á–∫–µ Fastlane, –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ –∑–Ω–∞—á–∫–µ        |

* –ö–æ–≥–¥–∞ –≤—ã –∑–∞–≤–µ—Ä—à–∏—Ç–µ –≤—Å—é —ç—Ç—É –ø–æ–¥–≥–æ—Ç–æ–≤–∫—É, –≤—ã –º–æ–∂–µ—Ç–µ –ø—Ä–∏—Å—Ç—É–ø–∏—Ç—å –∫ —Å–±–æ—Ä–∫–µ –∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ Firebase

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

#### –ü–ª–∞–≥–∏–Ω—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è Fastlane

* –£ –Ω–∞—Å –µ—Å—Ç—å `Pluginfile` –≤ —ç—Ç–æ–º —Ñ–∞–π–ª–µ –º—ã –º–æ–∂–µ–º –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–ª–∞–≥–∏–Ω—ã –¥–ª—è Fastlane, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º [fastlane-plugin-firebase_app_distribution](https://github.com/fastlane/fastlane-plugin-firebase_app_distribution) –∏ [fastlane-plugin-badge](https://github.com/HazAT/fastlane-plugin-badge)
